---
import AppLink from "~components/AppLink.astro"
import type { ISocial } from "~types/social"
import { getAllSocials } from "~api/social"
import ToggleColorScheme from "~components/ToggleColorScheme.astro"

const socials: ISocial[] = []

try {
  const socialsList: ISocial[] = await getAllSocials()
  socials.push(...socialsList)
} catch (error) {
  console.error(error)
}
---

<section>
  <div class:list={["toggle-color-scheme-wrapper", "fixed", "top-5", "mr-6", "md:top-8", "md:mr-12", "z-21"]}>
    <ToggleColorScheme class:list={["text-xl"]} />
  </div>

  <header
    class:list={[
      "app-header",
      "sticky",
      "top-0",
      "z-20",
      "px-6",
      "py-5",
      "mb-12",
      "-mx-6",
      "md:px-12",
      "md:py-8",
      "md:-mx-12",
      "md:mb-24",
      "leading-tight",
      "tracking-widest",
      "lowercase",
      "text-gray-800",
      "dark:text-gray-300",
      "bg-gray-100",
      "dark:bg-gray-900",
    ]}
  >
    <AppLink url="/">resume</AppLink>
  </header>

  <!-- Name -->
  <h1
    class:list={[
      "text-4xl",
      "sm:text-5xl",
      "font-medium",
      "tracking-tight",
      "capitalize",
      "text-gray-800",
      "dark:text-gray-300",
    ]}
  >
    jianqiang du
  </h1>

  <!-- Job Title -->
  <div
    class:list={[
      "text-lg",
      "sm:text-xl",
      "font-medium",
      "tracking-tight",
      "capitalize",
      "text-gray-800",
      "dark:text-gray-300",
      "mt-2",
      "md:mt-4",
    ]}
  >
    Software Developer
  </div>

  <!-- Location -->
  <div
    class:list={[
      "flex",
      "items-center",
      "gap-1",
      "text-sm",
      "leading-none",
      "text-gray-600",
      "dark:text-gray-400",
      "mt-2",
      "md:mt-4",
    ]}
  >
    <i class="i-ri:map-pin-line"></i>
    <span>Foshan</span>
  </div>

  <!-- Description -->
  <p class:list={["leading-normal", "mt-8", "md:mt-16"]}>
    <span>I am the creator of</span>
    <span class="inline-flex">
      <AppLink
        class:list={["text-gray-800", "dark:text-gray-300"]}
        url="https://github.com/yurikong/astro-theme-resume-minimalist"
        showSuffixIcon
      >
        Astro Theme Resume Minimalist
      </AppLink>
      .
    </span>
  </p>

  <!-- Social Contacts -->
  <ul class:list={["flex", "flex-wrap", "items-center", "gap-5", "text-2xl", "leading-none", "mt-12"]}>
    {
      socials.map((it) => (
        <li>
          <AppLink url={it.url} showPrefixIcon prefixIconClassName={it.iconClassName} title={it.name} />
        </li>
      ))
    }
  </ul>
</section>

<style>
  .toggle-color-scheme-wrapper {
    position-anchor: --app-header;
    right: anchor(right);
  }

  .app-header {
    anchor-name: --app-header;
  }
</style>
