---
import type { IWork } from "~types/work"
import { getAllWorks } from "~/api/work"
import WorkDetails from "./WorkDetails.astro"
import AppLink from "~components/AppLink.astro"

interface Props {
  class?: string
}
const { class: className } = Astro.props

const workDetailsList: IWork[] = []

try {
  const works: IWork[] = await getAllWorks()
  workDetailsList.push(...works)
} catch (error) {
  console.error(error)
}
---

<section class={className}>
  <h2
    class="sticky top-0 z-20 mb-4 bg-gray-100 px-6 py-5 text-(sm gray-800) font-semibold tracking-widest uppercase -mx-6 dark:(bg-transparent text-gray-300 backdrop-blur)"
  >
    work
  </h2>
  <ul>
    {
      workDetailsList.map((it) => (
        <li class="mb-16 last-of-type:mb-0">
          <WorkDetails {...it} />
        </li>
      ))
    }
  </ul>

  <!-- View Full Resume -->
  <AppLink class="mt-24 block text-gray-800 font-semibold capitalize dark:text-gray-300" showSuffixIcon>
    view full resume
  </AppLink>
</section>
